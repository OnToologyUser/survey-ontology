# baseURI: http://purl.org/survey-ontology/shapes#
# prefix: sosh

@prefix dash: <http://datashapes.org/dash#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix so: <http://purl.org/survey-ontology/so#> .
@prefix sosh: <http://purl.org/survey-ontology/shapes#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

sosh:
  a owl:Ontology ;
  owl:imports <http://datashapes.org/dash> ;
  owl:imports so: ;
.


sosh:AnswerShape
  a rdfs:Class ;
  a sh:NodeShape ;
  rdfs:label "Answer shape" ;
  rdfs:subClassOf rdfs:Resource ;
  sh:property [
      sh:path [
          sh:inversePath so:startsWith ;
        ] ;
      sh:maxCount 0 ;
    ] ;
  sh:targetClass so:Answer ;
  sh:xone (
      [
        sh:property [
            sh:path so:leadsTo ;
            sh:class so:Talk ;
            sh:maxCount 1 ;
          ] ;
      ]
      [
        sh:property [
            sh:path so:leadsTo ;
            sh:class so:Question ;
            sh:maxCount 1 ;
          ] ;
      ]
    ) ;
.
sosh:ClosedQuestionShape
  a rdfs:Class ;
  a sh:NodeShape ;
  rdfs:label "Closed question shape" ;
  rdfs:subClassOf rdfs:Resource ;
  sh:property [
      sh:path so:hasVisualization ;
      sh:class so:QuestionVisualization ;
      sh:maxCount 1 ;
      sh:minCount 1 ;
    ] ;
  sh:property [
      sh:path so:leadsTo ;
      sh:class so:ClosedAnswer ;
      sh:minCount 1 ;
    ] ;
  sh:targetClass so:ClosedQuestion ;
.
sosh:CompletedQuestionShape
  a rdfs:Class ;
  a sh:NodeShape ;
  rdfs:label "Completed question shape" ;
  rdfs:subClassOf rdfs:Resource ;
  sh:property [
      sh:path so:hasAnswer ;
      sh:maxCount 1 ;
      sh:minCount 1 ;
    ] ;
  sh:targetClass so:CompletedQuestion ;
  sh:xone (
      [
        sh:property [
            sh:path so:completesQuestion ;
            sh:maxCount 0 ;
          ] ;
      ]
      [
        sh:property [
            sh:path (
                so:hasAnswer
                [
                  sh:inversePath so:leadsTo ;
                ]
              ) ;
            sh:equals so:completesQuestion ;
          ] ;
      ]
    ) ;
  sh:xone (
      [
        sh:property [
            sh:path so:hasAnswerText ;
            sh:maxCount 0 ;
          ] ;
      ]
      [
        sh:property [
            sh:path so:hasAnswerText ;
            sh:class so:OpenAnswer ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
          ] ;
      ]
    ) ;
.
sosh:OpenAnswerShape
  a rdfs:Class ;
  a sh:NodeShape ;
  rdfs:label "Open answer shape" ;
  rdfs:subClassOf rdfs:Resource ;
  sh:property [
      sh:path so:hasText ;
      sh:maxCount 0 ;
    ] ;
.
sosh:OpenQuestionShape
  a rdfs:Class ;
  a sh:NodeShape ;
  rdfs:label "Open question shape" ;
  rdfs:subClassOf rdfs:Resource ;
  sh:property [
      sh:path so:leadsTo ;
      sh:class so:OpenAnswer ;
      sh:maxCount 1 ;
      sh:minCount 1 ;
    ] ;
  sh:targetClass so:OpenQuestion ;
.
sosh:QuestionShape
  a rdfs:Class ;
  a sh:NodeShape ;
  rdfs:label "Question shape" ;
  rdfs:subClassOf rdfs:Resource ;
  sh:property [
      sh:path so:leadsTo ;
      sh:class so:Answer ;
      sh:minCount 1 ;
    ] ;
  sh:targetClass so:Question ;
.
sosh:SurveyShape
  a rdfs:Class ;
  a sh:NodeShape ;
  rdfs:label "Survey shape" ;
  rdfs:subClassOf rdfs:Resource ;
  sh:property [
      sh:path so:startsWith ;
      sh:class so:SurveyElement ;
      sh:maxCount 1 ;
      sh:minCount 1 ;
    ] ;
  sh:targetClass so:SurveyProcedure ;
.
sosh:TalkShape
  a rdfs:Class ;
  a sh:NodeShape ;
  rdfs:label "Talk shape" ;
  rdfs:subClassOf rdfs:Resource ;
  sh:targetClass so:Talk ;
  sh:xone (
      [
        sh:property [
            sh:path so:leadsTo ;
            sh:class so:Talk ;
            sh:maxCount 1 ;
          ] ;
      ]
      [
        sh:property [
            sh:path so:leadsTo ;
            sh:class so:Question ;
            sh:maxCount 1 ;
          ] ;
      ]
    ) ;
.
